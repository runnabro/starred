/*global Modernizr */////////////////////
//global variables//
////////////////////
var current_pane=0,new_pane,$gum=$("#gum"),$header=$("header"),$headerLi=$header.find("li"),$each=$gum.find(".each"),$figure=$gum.find(".monitor, .email"),$footer=$("footer"),$body=$(document.body),timeOut,resetHeight=function(){$gum.css("height",$each.eq(current_pane).height()+"px")};$(document).on("keydown",function(e){(e.keyCode===37||e.keyCode===39)&&resetScroller()});var resetScroller=function(){console.log("reset");clearTimeout(timeOut);$figure.addClass("out transitionless").removeClass("in inning outing")},monitorAnimation=function(){var t;$figure.children("div").on("click",function(){var e=$(this),n=e.parent();n.removeClass("transitionless");switch(e.closest(".each")[0].id){case"wywh":t=3500;break;case"stylepro":case"emailc":t=2e3}if(n.hasClass("out")){n.addClass("inning").removeClass("out outing");timeOut=setTimeout(function(){n.addClass("in").removeClass("inning")},t)}else if(n.hasClass("in")){n.addClass("outing").removeClass("in inning");timeOut=setTimeout(function(){n.addClass("out").removeClass("outing")},t)}})}();if(!Modernizr.touch){var resize=!0;$(window).on("resize",function(){if(resize){clearTimeout(resize);resize=!1;setTimeout(function(){resize=!0;resetHeight(current_pane)},250)}})}var scrollInit=function(){var e=$(document).scrollTop(),t=$("header").offset().top,n=$("#wywh"),r=n.find("#contact"),i=r.offset().top,s=n.find("#legal-privacy"),o=s.offset().top,u=$("#emailc").find("figure:last-child"),a=u.offset().top;!Modernizr.touch&&e>t&&$header.addClass("in");var f=!0;$(window).on("scroll",function(){if(f){clearTimeout(f);f=!1;setTimeout(function(){f=!0;e=$(document).scrollTop();Modernizr.touch?e>t+100?$header.addClass("in"):$header.removeClass("in"):e>t?$header.addClass("in"):$header.removeClass("in");switch(current_pane){case 0:e>i-500&&r.addClass("in");e>o-500&&s.addClass("in")}},50)}})}(),navInit=function(){var e="0";$headerLi.on("click",function(){var t=$(this).index();current_pane=t;$headerLi.removeClass("active").eq(t).addClass("active");switch(t){case 0:e="0";break;case 1:e="-25";break;case 2:e="-50";break;case 3:e="-75"}$gum.addClass("out").removeClass("animate");setTimeout(function(){if(Modernizr.csstransforms3d)$gum.css("transform","translate3d("+e+"%,0,0) scale3d(1,1,1)");else if(Modernizr.csstransforms)$gum.css("transform","translate("+e+"%,0)");else{var t=$gum.width()*5/100*e;$gum.css("left",t+"px")}$gum.removeClass("out")},250);resetHeight();resetScroller()})}();(function(){$footer.on("click",function(e){$footer.addClass("in");e.stopPropagation()});Modernizr.touch?$gum.on("touchstart",function(){$footer.removeClass("in")}):$body.on("click",function(){$footer.removeClass("in")})})();var ucsfHover=function(){var e=$("#ucsf"),t=e.find("figure > div"),n=e.find("li");n.on("mouseenter",function(){switch($(this).index()){case 0:t.removeClass().addClass("bacteria-1");break;case 1:t.removeClass().addClass("bacteria-2");break;case 2:t.removeClass().addClass("bacteria-3");break;case 3:t.removeClass().addClass("bacteria-4")}})}();